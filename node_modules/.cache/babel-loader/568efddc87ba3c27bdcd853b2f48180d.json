{"ast":null,"code":"import decode from 'jwt-decode';\nconst JWT = 'store_token_id';\n\nconst setToken = token => {\n  localStorage.setItem(JWT, token);\n};\n\nconst getToken = () => {\n  return localStorage.getItem(JWT);\n}; //判断是否已经登陆\n\n\nconst isLogin = () => {\n  const jwToken = getToken();\n  return !!jwToken && !isTokenExpired(jwToken);\n};\n\nconst isTokenExpired = token => {\n  try {\n    const _info = decode(token);\n\n    return _info.exp < Date.now() / 1000;\n  } catch (e) {\n    return false;\n  }\n};\n\nconst getUser = () => {\n  const jwToken = getToken();\n\n  if (isLogin()) {\n    const user = decode(jwToken);\n    return user;\n  } else {\n    return null;\n  }\n};\n\nconst logout = () => {\n  localStorage.removeItem(JWT);\n};\n\nglobal.auth = {\n  setToken,\n  getToken,\n  getUser,\n  isLogin,\n  logout\n};","map":{"version":3,"names":["decode","JWT","setToken","token","localStorage","setItem","getToken","getItem","isLogin","jwToken","isTokenExpired","_info","exp","Date","now","e","getUser","user","logout","removeItem","global","auth"],"sources":["/Users/draxzh/Documents/web project/sneaker_shopping/app/src/commons/auth.js"],"sourcesContent":["import decode from 'jwt-decode'\nconst JWT = 'store_token_id';\nconst setToken = token =>{\n    localStorage.setItem(JWT, token);\n};\n\nconst getToken = () =>{\n    return localStorage.getItem(JWT)\n}\n//判断是否已经登陆\nconst isLogin = () =>{\n    const jwToken = getToken();\n    return !!jwToken && !isTokenExpired(jwToken);\n};\n\nconst isTokenExpired = token =>{\n    try{\n        const _info = decode(token);\n        return _info.exp < Date.now() / 1000;\n    }catch (e){\n        return false;\n    }\n};\n\nconst getUser = () =>{\n    const jwToken = getToken();\n    if(isLogin()){\n        const user =decode(jwToken);\n        return user;\n    }else{\n        return null;\n    }\n}\nconst logout = () => {\n    localStorage.removeItem(JWT);\n};\n\nglobal.auth={\n    setToken,\n    getToken,\n    getUser,\n    isLogin,\n    logout\n};"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,YAAnB;AACA,MAAMC,GAAG,GAAG,gBAAZ;;AACA,MAAMC,QAAQ,GAAGC,KAAK,IAAG;EACrBC,YAAY,CAACC,OAAb,CAAqBJ,GAArB,EAA0BE,KAA1B;AACH,CAFD;;AAIA,MAAMG,QAAQ,GAAG,MAAK;EAClB,OAAOF,YAAY,CAACG,OAAb,CAAqBN,GAArB,CAAP;AACH,CAFD,C,CAGA;;;AACA,MAAMO,OAAO,GAAG,MAAK;EACjB,MAAMC,OAAO,GAAGH,QAAQ,EAAxB;EACA,OAAO,CAAC,CAACG,OAAF,IAAa,CAACC,cAAc,CAACD,OAAD,CAAnC;AACH,CAHD;;AAKA,MAAMC,cAAc,GAAGP,KAAK,IAAG;EAC3B,IAAG;IACC,MAAMQ,KAAK,GAAGX,MAAM,CAACG,KAAD,CAApB;;IACA,OAAOQ,KAAK,CAACC,GAAN,GAAYC,IAAI,CAACC,GAAL,KAAa,IAAhC;EACH,CAHD,CAGC,OAAOC,CAAP,EAAS;IACN,OAAO,KAAP;EACH;AACJ,CAPD;;AASA,MAAMC,OAAO,GAAG,MAAK;EACjB,MAAMP,OAAO,GAAGH,QAAQ,EAAxB;;EACA,IAAGE,OAAO,EAAV,EAAa;IACT,MAAMS,IAAI,GAAEjB,MAAM,CAACS,OAAD,CAAlB;IACA,OAAOQ,IAAP;EACH,CAHD,MAGK;IACD,OAAO,IAAP;EACH;AACJ,CARD;;AASA,MAAMC,MAAM,GAAG,MAAM;EACjBd,YAAY,CAACe,UAAb,CAAwBlB,GAAxB;AACH,CAFD;;AAIAmB,MAAM,CAACC,IAAP,GAAY;EACRnB,QADQ;EAERI,QAFQ;EAGRU,OAHQ;EAIRR,OAJQ;EAKRU;AALQ,CAAZ"},"metadata":{},"sourceType":"module"}