{"ast":null,"code":"var _jsxFileName = \"/Users/draxzh/Documents/web project/sneaker_shopping/app/src/components/Product.js\";\n\n/* eslint-disable no-restricted-globals */\nimport React from 'react';\nimport Panel from 'components/Panel';\nimport { formatPrice } from 'commons/FormatPrice';\nimport EditInventory from './EditInventory';\nimport axios from 'commons/axios';\nimport { toast } from 'react-toastify';\nimport { withRouter } from '';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Product extends React.Component {\n  constructor() {\n    super(...arguments);\n\n    this.toEdit = () => {\n      Panel.open({\n        component: EditInventory,\n        props: {\n          product: this.props.product,\n          deleteProduct: this.props.delete\n        },\n\n        /*if there is data being called back, then we can*/\n        callback: data => {\n          if (data) {\n            this.props.update(data);\n          }\n        }\n      });\n    };\n\n    this.addCart = async () => {\n      if (!global.auth.isLogin()) {\n        this.props.navigate('/login');\n        toast.info('Please Login First');\n        return;\n      }\n\n      try {\n        const {\n          id,\n          name,\n          image,\n          price\n        } = this.props.product; //获取某个id商品\n\n        const res = axios.get(`/carts?productID=${id}`);\n        const carts = res.data;\n\n        if (carts && carts.length > 0) {\n          const cart = carts[0];\n          cart.mount += 1;\n          axios.put(`/carts/${cart.id}`, cart);\n        } else {\n          const cart = {\n            productId: id,\n            name,\n            image,\n            price,\n            mount: 1 //该商品在购物车中默认的数量是多少\n\n          };\n          await axios.post('/carts', cart);\n          toast.success('Add Cart Success');\n          this.props.updateCartNum();\n        }\n      } catch (error) {\n        toast.error('Add Cart Failed');\n      }\n    };\n  }\n\n  render() {\n    const {\n      name,\n      image,\n      tags,\n      price,\n      status\n    } = this.props.product;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: status === 'available' ? 'product' : 'product out-stock',\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-head has-text-right\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-sliders-h\",\n            onClick: this.toEdit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"img-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"out-stock-text\",\n            children: \"Out of Stock\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"figure\", {\n            className: \"image is-4by3\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: image,\n              alt: name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"p-tags\",\n          children: tags\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"p-name\",\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-footer\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"price\",\n          children: formatPrice(price)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"add-cart\",\n          disabled: status === 'unavailable',\n          onClick: this.addCart,\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-shopping-cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-exclamation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Product;","map":{"version":3,"names":["React","Panel","formatPrice","EditInventory","axios","toast","withRouter","Product","Component","toEdit","open","component","props","product","deleteProduct","delete","callback","data","update","addCart","global","auth","isLogin","navigate","info","id","name","image","price","res","get","carts","length","cart","mount","put","productId","post","success","updateCartNum","error","render","tags","status"],"sources":["/Users/draxzh/Documents/web project/sneaker_shopping/app/src/components/Product.js"],"sourcesContent":["/* eslint-disable no-restricted-globals */\nimport React from 'react';\nimport Panel from 'components/Panel';\nimport {formatPrice} from 'commons/FormatPrice';\nimport EditInventory from './EditInventory';\nimport axios from 'commons/axios';\nimport { toast } from 'react-toastify';\nimport {withRouter} from ''\n\nclass Product extends React.Component{\n    toEdit = () =>{\n        Panel.open({\n            component: EditInventory,\n            props:{\n                product: this.props.product,\n                deleteProduct: this.props.delete,\n            },\n            /*if there is data being called back, then we can*/\n            callback: data=>{\n                if(data){\n                    this.props.update(data);\n                }\n            }\n        });\n    };\n    \n    addCart = async() =>{\n        if(!global.auth.isLogin()){\n            this.props.navigate('/login')\n            toast.info('Please Login First');\n            return;\n        }\n        try{\n            const { id, name, image, price } = this.props.product;\n            //获取某个id商品\n            const res = axios.get(`/carts?productID=${id}`);\n            const carts = res.data;\n            if (carts && carts.length > 0) {\n                const cart = carts[0];\n                cart.mount += 1;\n                axios.put(`/carts/${cart.id}`,cart);\n            } else {\n                const cart = {\n                    productId: id,\n                    name,\n                    image,\n                    price,\n                    mount: 1 //该商品在购物车中默认的数量是多少\n                };              \n                await axios.post('/carts', cart);\n                toast.success('Add Cart Success');\n                this.props.updateCartNum();\n            }\n        }catch(error){\n            toast.error('Add Cart Failed');\n        }\n    }\n\n    render(){\n        const {name, image, tags, price,status} = this.props.product;\n        return(\n            <div className={status ==='available'?'product':'product out-stock'}>\n                <div className=\"p-content\">\n                    <div className=\"p-head has-text-right\">\n                        <i className=\"fas fa-sliders-h\" onClick={this.toEdit}/>\n                    </div>\n                    <div className=\"img-wrapper\">\n                        <div className=\"out-stock-text\">Out of Stock</div>\n                        <figure className=\"image is-4by3\">\n                            <img src={image} alt={name} />\n                        </figure>\n                    </div>\n                    <p className=\"p-tags\">{tags}</p>\n                    <p className=\"p-name\">{name}</p>\n                    \n                </div>\n                <div className=\"p-footer\">\n                    <p className=\"price\">\n                        {formatPrice(price)}\n                    </p>\n                    <button className=\"add-cart\" disabled={status==='unavailable'} onClick={this.addCart}>\n                        <i className=\"fas fa-shopping-cart\"></i>\n                        <i className=\"fas fa-exclamation\"></i>\n                    </button>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Product;"],"mappings":"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"},"metadata":{},"sourceType":"module"}