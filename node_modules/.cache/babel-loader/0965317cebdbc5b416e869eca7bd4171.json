{"ast":null,"code":"var _jsxFileName = \"/Users/draxzh/Documents/web project/sneaker_shopping/app/src/components/Products.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport ToolBox from './ToolBox';\nimport Product from './Product';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\nimport Panel from 'components/Panel';\nimport AddInventory from 'components/AddInventory';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Products extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      products: [],\n      //搜素后products的值会被更改\n      sourceProducts: []\n    };\n\n    this.search = text => {\n      //Get New Array\n      let _products = [...this.state.sourceProducts]; //Filter New Array\n\n      _products = _products.filter(p => {\n        //拿到name调用match方法\n        const matchArray = p.name.match(new RegExp(text, 'gi'));\n        return !!matchArray;\n      }); //set state\n\n      this.setState({\n        products: _products\n      });\n    };\n\n    this.toAdd = () => {\n      Panel.open({\n        component: AddInventory,\n        callback: data => {\n          console.log(data);\n\n          if (data) {\n            this.add(data);\n          }\n        }\n      });\n    };\n\n    this.add = product => {\n      const _products = [...this.state.products];\n\n      _products.push(product);\n\n      const _sProducts = [...this.state.sourceProducts];\n\n      _sProducts.push(product);\n\n      this.setState({\n        products: _products,\n        sourceProducts: _sProducts\n      });\n    };\n\n    this.update = product => {\n      const _products = [...this.state.products];\n\n      const index = _products.findIndex(p => p.id === product.id);\n\n      _products.splice(index, 1, product);\n\n      const _sProducts = [...this.state.sourceProducts];\n\n      _sProducts.push(product);\n\n      this.setState({\n        products: _products,\n        sourceProducts: _sProducts\n      });\n    };\n  }\n\n  componentDidMount() {\n    axios.get('http://localhost:3003/products').then(response => {\n      this.setState({\n        products: response.data,\n        sourceProducts: response.data\n      });\n    });\n  } //search the products\n\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(ToolBox, {\n        search: this.search\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"products\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"columns is-multiline is-dektop\",\n          children: /*#__PURE__*/_jsxDEV(TransitionGroup, {\n            component: null,\n            children: this.state.products.map(p => {\n              return /*#__PURE__*/_jsxDEV(CSSTransition, {\n                classNames: \"product-fade\",\n                timeout: 300,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"column is-3\",\n                  children: /*#__PURE__*/_jsxDEV(Product, {\n                    product: p\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 89,\n                    columnNumber: 41\n                  }, this)\n                }, p.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 88,\n                  columnNumber: 37\n                }, this)\n              }, p.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 37\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button is-primary add-btn\",\n          onClick: this.toAdd,\n          children: \"ADD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Products;","map":{"version":3,"sources":["/Users/draxzh/Documents/web project/sneaker_shopping/app/src/components/Products.js"],"names":["React","axios","ToolBox","Product","CSSTransition","TransitionGroup","Panel","AddInventory","Products","Component","state","products","sourceProducts","search","text","_products","filter","p","matchArray","name","match","RegExp","setState","toAdd","open","component","callback","data","console","log","add","product","push","_sProducts","update","index","findIndex","id","splice","componentDidMount","get","then","response","render","map"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport ToolBox from './ToolBox';\nimport Product from './Product';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\nimport Panel from 'components/Panel';\nimport AddInventory from 'components/AddInventory';\n\nclass Products extends React.Component{\n    state = {\n        products:[],\n        //搜素后products的值会被更改\n        sourceProducts:[]\n    };\n\n    componentDidMount(){\n        axios.get('http://localhost:3003/products').then(response=>{\n            this.setState({\n                products:response.data,\n                sourceProducts: response.data\n            });\n        });\n    }\n    //search the products\n    search = text =>{\n        //Get New Array\n        let _products = [...this.state.sourceProducts]\n        //Filter New Array\n        _products = _products.filter(p=>{\n            //拿到name调用match方法\n            const matchArray =  p.name.match(new RegExp(text, 'gi'));\n            return !!matchArray;\n        })\n        //set state\n        this.setState({\n            products: _products\n        })\n    }\n    \n    toAdd=()=>{\n        Panel.open({\n            component: AddInventory,\n            callback: data =>{\n                console.log(data);\n                if(data){\n                    this.add(data);\n                }\n            }\n        });\n    }\n\n    add = product =>{\n        const _products = [...this.state.products];\n        _products.push(product);\n        const _sProducts = [...this.state.sourceProducts];\n        _sProducts.push(product)\n\n        this.setState({\n            products:_products,\n            sourceProducts:_sProducts\n        })\n    }\n\n    update = product =>{\n        const _products = [...this.state.products];\n        const index = _products.findIndex(p=>p.id === product.id);\n        _products.splice(index, 1, product);\n        const _sProducts = [...this.state.sourceProducts];\n        _sProducts.push(product)\n\n        this.setState({\n            products: _products,\n            sourceProducts: _sProducts\n        })\n    }\n\n    render(){\n        return(\n            <div>\n                <ToolBox search={this.search}/>\n                <div className=\"products\">\n                    <div className=\"columns is-multiline is-dektop\">\n                        <TransitionGroup component = {null}>\n                        {\n                            this.state.products.map(p=>{\n                                return(\n                                    <CSSTransition classNames=\"product-fade\" timeout ={300} key={p.id}>\n                                    <div className=\"column is-3\" key={p.id}>\n                                        <Product product={p}/>\n                                    </div>\n                                    </CSSTransition>\n                                );\n                            })\n                        }\n                        </TransitionGroup>\n                    </div>\n                    <button className=\"button is-primary add-btn\" onClick={this.toAdd}>ADD</button>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Products;"]},"metadata":{},"sourceType":"module"}